<!DOCTYPE html><html class=" js touch js touch"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">@charset "UTF-8";[ng:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;} body{ color: #333333; font-family: ProximaNovaRegular,Lucida Grande,Lucida Sans Unicode,Arial,sans-serif;font-size: 15px; line-height: 17px;}</style><link href="https://developer.salesforce.com/resource/stylesheets/holygrail.min.css" rel="stylesheet" type="text/css"><script type="text/javascript" async="" src="https://www.google.com/cse/cse.js?cx=014927952804528719554:cug5vn4rcvy"></script><script type="text/javascript" async="" src="https://tag.perfectaudience.com/serve/52f42c76b4f4376fc1000003.js"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-MWZCN8"></script><script type="text/javascript" src="https://developer.salesforce.com/resource/javascripts/holygrail.min.js"></script><link rel="stylesheet" href="https://developer.salesforce.com/resource/stylesheets/docs.min.css" type="text/css"><link rel="stylesheet" href="https://developer.salesforce.com/resource/stylesheets/events.min.css" type="text/css" media="all"><script src="https://developer.salesforce.com/resource/javascripts/syntax-highlighter.min.js"></script><link href="https://developer.salesforce.com/resource/stylesheets/syntax-highlighter.min.css" rel="stylesheet" type="text/css"><title>PackageLicense | SOAP API Developer Guide | Salesforce Developers</title><script type="text/javascript" async="" src="https://pixel-geo.prfct.co/tagjs?a_id=17624&amp;source=js_tag"></script></head>
<body style="" class="adroll_safari_light_theme">
        <!-- uiView:  --><div df-bind-html-directive="" class="topic-content ng-binding ng-scope" df-bind-html="body" ui-view=""><a name="sforce_api_objects_packagelicense"><!-- --></a><h1 class="helpHead1" id="PackageLicense-7BDD7EEF">
<a name="PackageLicense-7BDD7EEF"><!-- --></a><span class="ph" id="topic-title"><a name="topic-title"><!-- --></a>PackageLicense</span>
</h1><div class="body">
<div class="shortdesc"><span class="ph" id="summary"><a name="summary"><!-- --></a><span class="ph" id="description"><a name="description"><!-- --></a>Represents a license for an installed managed
        package.</span> This object is available in API version 31.0 and
    later.</span></div>

<div class="section" id="section1">
<a name="section1"><!-- --></a><h2 class="helpHead2">Supported Calls</h2>
<p class="p"> <samp class="codeph nolang">query()</samp>, <samp class="codeph nolang">retrieve()</samp></p>
</div>

<div class="section" id="section2">
<a name="section2"><!-- --></a><h2 class="helpHead2">Fields</h2>

<div class="data colSort"><table class="featureTable sort_table" summary="">
<thead class="thead sorted" align="left">
<tr>
<th class="featureTableHeader  " id="d582197e80">Field Name</th>

<th class="featureTableHeader  " id="d582197e83">Details</th>

</tr>

</thead>

<tbody class="tbody">
<tr id="AuthCode">
<td class="entry" headers="d582197e80" data-title="Field Name"><span class="keyword parmname">AllowedLicenses</span></td>

<td class="entry" headers="d582197e83" data-title="Details">
<dl class="dl detailList">

<dt class="dt dlterm">Type</dt>

<dd class="dd">int</dd>



<dt class="dt dlterm">Properties</dt>

<dd class="dd">Filter, Group, Nillable, Sort</dd>



<dt class="dt dlterm">Description</dt>

<dd class="dd">The number of users allowed to use the package.</dd>


</dl>
</td>

</tr>

<tr id="ConnectedAppCallbackUrl">
<td class="entry" headers="d582197e80" data-title="Field Name"><span class="keyword parmname">ExpirationDate</span></td>

<td class="entry" headers="d582197e83" data-title="Details">
<dl class="dl detailList">

<dt class="dt dlterm">Type</dt>

<dd class="dd">dateTime</dd>



<dt class="dt dlterm">Properties</dt>

<dd class="dd">Filter, Nillable, Sort</dd>



<dt class="dt dlterm">Description</dt>

<dd class="dd">The date&nbsp;and time when the&nbsp;package license expires.</dd>


</dl>
</td>

</tr>

<tr id="CreatedOrgInstance">
<td class="entry" headers="d582197e80" data-title="Field Name"><span class="keyword parmname">NamespacePrefix</span></td>

<td class="entry" headers="d582197e83" data-title="Details">
<dl class="dl detailList">

<dt class="dt dlterm">Type</dt>

<dd class="dd">string</dd>



<dt class="dt dlterm">Properties</dt>

<dd class="dd">Filter, Group, Sort</dd>



<dt class="dt dlterm">Description</dt>

<dd class="dd">The namespace prefix associated with the package.</dd>


</dl>
</td>

</tr>

<tr>
<td class="entry" headers="d582197e80" data-title="Field Name"><span class="keyword parmname">Status</span></td>

<td class="entry" headers="d582197e83" data-title="Details">
<dl class="dl detailList">

<dt class="dt dlterm">Type</dt>

<dd class="dd">picklist</dd>



<dt class="dt dlterm">Properties</dt>

<dd class="dd">Filter, Group, Sort</dd>



<dt class="dt dlterm">Description</dt>

<dd class="dd">The status of the license. Possible values are: <span class="keyword parmname">Active</span>, <span class="keyword parmname">Expired</span>, <span class="keyword parmname">Free</span>, and <span class="keyword parmname">Trial</span>.</dd>


</dl>
</td>

</tr>

<tr>
<td class="entry" headers="d582197e80" data-title="Field Name"><span class="keyword parmname">UsedLicenses</span></td>

<td class="entry" headers="d582197e83" data-title="Details">
<dl class="dl detailList">

<dt class="dt dlterm">Type</dt>

<dd class="dd">int</dd>



<dt class="dt dlterm">Properties</dt>

<dd class="dd">Create, Filter, Nillable, Sort</dd>



<dt class="dt dlterm">Description</dt>

<dd class="dd">The number of users who have a license to the package.</dd>


</dl>
</td>

</tr>

</tbody>

</table></div>
</div>

<div class="section" id="section3">
<a name="section3"><!-- --></a><h2 class="helpHead2" id="usage_title">
<a name="usage_title"><!-- --></a>Usage</h2>
<p class="p" id="usage_p1"><a name="usage_p1"><!-- --></a>Use this object to determine the number of licenses
allowed and  in use for a managed package installed in your organization.</p>
<div class="p" id="usage_p2">
<a name="usage_p2"><!-- --></a>The following example demonstrates the use of the
API to manage licenses for a package. The example defines an Apex
class that does the following.<ul class="ul bulletList">
<li class="li">Retrieves the PackageLicense record for the specified package
(identified by its namespace prefix).</li>

<li class="li">Defines a function that returns a list of all users with the specified
profile.</li>

<li class="li">Creates a UserPackageLicense record for each user with that profile,
which has the effect of assigning a license for the package to all
users with that profile.</li>

<li class="li">Returns an error message if the number of users exceeds the number
of available licenses.</li>

</ul>
</div>
<div class="codeSection apex_code"><div id="highlighter_248245" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_248245_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_248245" menu="false" src="https://developer.salesforce.com/resource/flash/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="apexKey">public</code> <code class="apexKey">class</code> <code class="plain">AssignPackageLicense {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">static</code> <code class="apexKey">String</code> <code class="plain">PACKAGE_NAMESPACE_PREFIX = </code><code class="apexString">'acme_101'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">static</code> <code class="apexKey">String</code> <code class="plain">PROFILE_ID = </code><code class="apexString">'00exx000000jz1SAAQ'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">public</code> <code class="apexKey">static</code> <code class="apexKey">String</code> <code class="plain">exceptionText {</code><code class="apexKey">get</code><code class="plain">; set;}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">public</code> <code class="plain">AssignPackageLicense() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">exceptionText = </code><code class="apexString">'Initialized'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">static</code> <code class="apexKey">List</code><code class="plain">&lt;User&gt; getUsersWithProfile(){</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">String</code> <code class="plain">userQuery = </code><code class="apexString">'SELECT Id FROM User WHERE ProfileId = :PROFILE_ID'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">List</code><code class="plain">&lt;User&gt; matchingUsers = </code><code class="apexKey">new</code> <code class="apexKey">List</code><code class="plain">&lt;User&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">matchingUsers = [</code><code class="apexKey">SELECT</code> <code class="plain">Id </code><code class="apexKey">FROM</code> <code class="plain">User </code><code class="apexKey">WHERE</code> <code class="plain">ProfileId = :PROFILE_ID];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">return</code> <code class="plain">matchingUsers;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">public</code> <code class="apexKey">static</code> <code class="apexKey">void</code> <code class="plain">assignLicenseByProfile() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexComments">//find the PackageLicense Id</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">PackageLicense pl = [</code><code class="apexKey">SELECT</code> <code class="plain">Id, NamespacePrefix, AllowedLicenses, UsedLicenses, </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ExpirationDate,Status </code><code class="apexKey">FROM</code> <code class="plain">PackageLicense </code><code class="apexKey">WHERE</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">NamespacePrefix = :PACKAGE_NAMESPACE_PREFIX];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">System</code><code class="plain">.</code><code class="apexKey">assert</code><code class="plain">(pl != </code><code class="apexKey">null</code><code class="plain">, </code><code class="apexString">'PackageLicense cannot be null.'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">List</code><code class="plain">&lt;User&gt; usersToAssignLicenses = getUsersWithProfile();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">List</code><code class="plain">&lt;UserPackageLicense&gt; firstUPLs = </code><code class="apexKey">new</code> <code class="apexKey">List</code><code class="plain">&lt;UserPackageLicense&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexComments">//create a new UserPackageLicense record for each user with the specified profile</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">for</code> <code class="plain">(Integer i = </code><code class="value">0</code><code class="plain">; i&lt; usersToAssignLicenses.size(); i++){</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">UserPackageLicense upl = </code><code class="apexKey">new</code> <code class="plain">UserPackageLicense();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">upl.PackageLicenseId = pl.Id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">upl.UserId = usersToAssignLicenses[i].Id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">firstUPLs.add(upl);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexComments">//bulk insert</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">insert</code><code class="plain">(firstUPLs);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="apexKey">catch</code><code class="plain">(DmlException e) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">for</code> <code class="plain">(Integer i = </code><code class="value">0</code><code class="plain">; i &lt; e.getNumDml(); i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexComments">// process exception here </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">System</code><code class="plain">.debug(e.getDmlMessage(i)); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">String</code> <code class="plain">status = e.getDmlStatusCode(i);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">System</code><code class="plain">.debug(status + </code><code class="apexString">' '</code> <code class="plain">+ e.getDmlMessage(i));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">if</code><code class="plain">(status.equals(</code><code class="apexString">'LICENSE_LIMIT_EXCEEDED'</code><code class="plain">)){</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">exceptionText = </code><code class="apexString">'You tried to assign more licenses than available. '</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">+</code><code class="apexString">' You tried to create '</code><code class="plain">+ firstUPLs.size()+</code><code class="apexString">' licenses but only have '</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">+ (pl.AllowedLicenses - pl.UsedLicenses) + </code><code class="apexString">' licenses free.'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="apexKey">System</code><code class="plain">.debug(exceptionText);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}&nbsp;&nbsp;&nbsp; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div></div>
</div>

</div><div id="sfdc:seealso" class="related-links"></div><!--DRC 202.7--></div>
        <div class="row-fluid nav-buttons-container"> </div>
      </body></html>